<section id="customer-list" class="content-wrapper p-0">
  <div class="content-body">
    <div class="card shadow-sm">

      <!-- ===== Card header: Title + Search + Add (same as supplier) ===== -->
      <div
        class="card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-0 pb-0 border-0"
      >
        <h4 class="card-title mb-0" style="font-weight:600; color:#2E5F73;">
          Customer List
        </h4>

        <div class="mt-1 mt-md-0 d-flex align-items-center">
          <label class="d-flex align-items-center mb-0 mr-1">
            Search:
            <input
              [(ngModel)]="searchValue"
              name="searchValue"
              type="search"
              class="form-control ml-25"
              (keyup)="filterUpdate($event)"
              (search)="filterUpdate($event)"
            />
          </label>

          <button class="btn btn-primary ml-1" (click)="Add()">
            <i data-feather="plus" class="d-sm-none d-inline-block mr-0 mr-sm-1"></i>
            <span class="d-none d-sm-inline-block">Add</span>
          </button>
        </div>
      </div>

      <!-- ===== Card body: Show entries + table (same as supplier) ===== -->
      <div class="card-body pt-1">
        <div class="row align-items-center mb-1">
          <!-- Page size -->
          <div class="col-md-6 col-12">
            <div class="d-flex align-items-center">
              <label class="d-flex align-items-center mb-0">
                Show
                <select class="form-control mx-25" [(ngModel)]="selectedOption">
                  <option [ngValue]="10">10</option>
                  <option [ngValue]="25">25</option>
                  <option [ngValue]="50">50</option>
                  <option [ngValue]="100">100</option>
                </select>
                entries
              </label>
            </div>
          </div>

          <!-- right blank spacing (to match supplier) -->
          <div class="col-md-6 col-12 text-right d-none d-md-block"></div>
        </div>

        <!-- ===== Table ===== -->
        <div class="table-responsive table-wrap">
          <ngx-datatable
            class="bootstrap core-bootstrap customers-table"
            [rows]="CustomerMasterListFiltered"
            [rowHeight]="58"
            [limit]="selectedOption"
            [columnMode]="'force'"
            [headerHeight]="40"
            [footerHeight]="50"
            [scrollbarH]="true"
            [reorderable]="true"
          >

            <!-- Customer Name -->
            <ngx-datatable-column name="CUSTOMER" prop="customerName" [width]="220">
              <ng-template ngx-datatable-cell-template let-row="row">
                <div class="po-wrap-cell" [title]="row?.customerName">
                  {{ row?.customerName || '—' }}
                </div>
              </ng-template>
            </ngx-datatable-column>

            <!-- Contact Number -->
            <ngx-datatable-column name="CONTACT" [width]="150">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.contactNumber ?? '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Point of Contact -->
            <ngx-datatable-column name="POC" [width]="180">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.pointOfContactPerson || '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Email -->
            <ngx-datatable-column name="EMAIL" [width]="220">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.email || '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Credit Amount -->
            <ngx-datatable-column name="CREDIT AMOUNT" [width]="150">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{
                  row?.creditAmount === null || row?.creditAmount === undefined
                    ? '—'
                    : (row.creditAmount | number : '1.2-2')
                }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Payment Terms -->
            <ngx-datatable-column name="PAYMENT TERMS" [width]="180">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.paymentTermsName || '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Customer Group -->
            <ngx-datatable-column name="CUSTOMER GROUP" [width]="180">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.customerGroupName || '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Location -->
            <ngx-datatable-column name="LOCATION" [width]="150">
              <ng-template ngx-datatable-cell-template let-row="row">
                {{ row?.locationName || '—' }}
              </ng-template>
            </ngx-datatable-column>

            <!-- Approved -->
            <ngx-datatable-column name="KYC VERIFICATION" [width]="160">
              <ng-template ngx-datatable-cell-template let-row="row">
                <span
                  class="badge rounded-pill"
                  [ngClass]="row?.isApproved ? 'bg-success' : 'bg-warning'"
                >
                  {{ row?.isApproved ? 'Approved' : 'Pending' }}
                </span>
              </ng-template>
            </ngx-datatable-column>

            <!-- Actions -->
            <ngx-datatable-column name="ACTIONS" [width]="110" [sortable]="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="d-flex align-items-center">
                  <i
                    class="fas fa-pen text-primary mr-2 cursor-pointer"
                    (click)="onEdit(row)"
                  ></i>
                  <i
                    class="fas fa-trash text-danger"
                    style="cursor:pointer"
                    (click)="deleteCustomer(row)"
                  ></i>
                </div>
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>
        </div>
      </div>
    </div>
  </div>
</section>